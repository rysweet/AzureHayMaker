graph TB
    subgraph "BEFORE: Dev Environment (INSECURE)"
        GHS1[GitHub Secrets]
        GHA1[GitHub Actions]
        FA1[Function App Settings]
        PORTAL1[Azure Portal<br/>âŒ Secrets VISIBLE]

        GHS1 -->|Pass secrets| GHA1
        GHA1 -->|az functionapp config set<br/>DIRECT INJECTION| FA1
        FA1 -.->|Visible in UI| PORTAL1

        style FA1 fill:#DC3545,color:#fff
        style PORTAL1 fill:#DC3545,color:#fff
    end

    subgraph "AFTER: All Environments (SECURE)"
        GHS2[GitHub Secrets]
        GHA2[GitHub Actions]
        KV2[Azure Key Vault<br/>ðŸ”’ Secrets Storage]
        FA2[Function App<br/>Key Vault References]
        PORTAL2[Azure Portal<br/>âœ… Shows @KeyVault(...)]

        GHS2 -->|Pass secrets| GHA2
        GHA2 -->|az keyvault secret set| KV2
        GHA2 -->|Configure references| FA2
        FA2 -->|@Microsoft.KeyVault(...)| KV2
        FA2 -.->|References only| PORTAL2

        style KV2 fill:#28A745,color:#fff
        style FA2 fill:#28A745,color:#fff
        style PORTAL2 fill:#28A745,color:#fff
    end

    classDef secure fill:#28A745,color:#fff
    classDef insecure fill:#DC3545,color:#fff
